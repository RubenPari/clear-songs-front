<div class="track-management-container">
  <div class="page-header">
    <div>
      <h1 class="page-title">Track Management</h1>
      <p class="page-subtitle">Remove tracks based on the number of songs per artist</p>
    </div>
  </div>

  <div class="content-layout">
    <div class="main-section">
      <div class="modern-card">
        <div class="card-header-modern">
          <div class="card-header-content">
            <i class="bi bi-sliders me-2"></i>
            <div>
              <h5 class="card-title-modern">Delete Tracks by Range</h5>
              <p class="card-subtitle">Remove tracks based on the number of songs per artist</p>
            </div>
          </div>
        </div>
        <div class="card-body-modern">
          <div class="presets-section">
            <label class="section-label">Quick Presets</label>
            <p class="section-description">Select a preset to quickly fill the range fields</p>
            <div class="presets-grid">
              @for (preset of presetRanges; track preset.label) {
                <button
                  class="btn-preset"
                  (click)="applyPreset(preset)"
                >
                  <i class="bi bi-lightning-fill"></i>
                  <span>{{ preset.label }}</span>
                </button>
              }
            </div>
          </div>

          <div class="divider"></div>

          <form [formGroup]="rangeForm" class="range-form">
            <label class="section-label">Custom Range</label>
            <p class="section-description">Define your own range by setting minimum and/or maximum track counts</p>
            
            <div class="range-inputs">
              <div class="input-group-modern">
                <label class="input-label">Minimum Tracks</label>
                <input 
                  type="number" 
                  class="form-control-modern" 
                  formControlName="min" 
                  min="0"
                  placeholder="e.g. 1"
                  [class.is-invalid]="rangeForm.get('min')?.invalid && rangeForm.get('min')?.touched"
                />
                <div class="input-help">Leave empty for no minimum</div>
              </div>

              <div class="range-separator">
                <div class="separator-line"></div>
                <span class="separator-text">to</span>
                <div class="separator-line"></div>
              </div>

              <div class="input-group-modern">
                <label class="input-label">Maximum Tracks</label>
                <input 
                  type="number" 
                  class="form-control-modern" 
                  formControlName="max" 
                  min="0"
                  placeholder="e.g. 10"
                  [class.is-invalid]="rangeForm.get('max')?.invalid && rangeForm.get('max')?.touched"
                />
                <div class="input-help">Leave empty for no maximum</div>
              </div>
            </div>

            @if (rangeForm.errors?.['invalidRange']) {
              <div class="error-banner">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                <span>Maximum must be greater than or equal to minimum</span>
              </div>
            }

            <div class="form-actions">
              <button class="btn-action btn-action-secondary" type="button" (click)="rangeForm.reset()">
                <i class="bi bi-x-circle"></i>
                <span>Clear</span>
              </button>
              <button
                class="btn-action btn-action-danger"
                [disabled]="rangeForm.invalid"
                (click)="deleteByRange()"
              >
                <i class="bi bi-trash"></i>
                <span>Delete Tracks in Range</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="info-section">
      <div class="modern-card info-card">
        <div class="card-header-modern">
          <div class="card-header-content">
            <i class="bi bi-info-circle me-2"></i>
            <h5 class="card-title-modern">How It Works</h5>
          </div>
        </div>
        <div class="card-body-modern">
          <div class="info-list">
            <div class="info-item">
              <div class="info-icon">
                <i class="bi bi-1-circle-fill"></i>
              </div>
              <div class="info-text">
                This tool removes tracks from artists based on how many songs you have from them
              </div>
            </div>
            <div class="info-item">
              <div class="info-icon">
                <i class="bi bi-2-circle-fill"></i>
              </div>
              <div class="info-text">
                For example, setting min=1 and max=1 removes all artists with only one track (singles)
              </div>
            </div>
            <div class="info-item">
              <div class="info-icon">
                <i class="bi bi-3-circle-fill"></i>
              </div>
              <div class="info-text">
                Setting min=20 removes all artists with 20 or more tracks
              </div>
            </div>
            <div class="info-item">
              <div class="info-icon">
                <i class="bi bi-shield-check"></i>
              </div>
              <div class="info-text">
                All deleted tracks are automatically backed up to the database
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

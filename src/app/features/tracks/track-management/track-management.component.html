<div class="track-management-container">
  <h1>Track Management</h1>

  <mat-card class="management-card">
    <mat-card-header>
      <mat-card-title>Delete Tracks by Range</mat-card-title>
      <mat-card-subtitle>Remove tracks based on the number of songs per artist</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="preset-buttons">
        <h3>Quick Presets:</h3>
        <div class="button-grid">
          <button
            mat-stroked-button
            *ngFor="let preset of presetRanges"
            (click)="applyPreset(preset)"
          >
            {{ preset.label }}
          </button>
        </div>
      </div>

      <mat-divider></mat-divider>

      <form [formGroup]="rangeForm" class="range-form">
        <h3>Custom Range:</h3>
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Minimum tracks</mat-label>
            <input matInput type="number" formControlName="min" min="0" />
            <mat-hint>Leave empty for no minimum</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Maximum tracks</mat-label>
            <input matInput type="number" formControlName="max" min="0" />
            <mat-hint>Leave empty for no maximum</mat-hint>
          </mat-form-field>
        </div>

        <div class="error-message" *ngIf="rangeForm.errors?.['invalidRange']">
          <mat-error>Maximum must be greater than minimum</mat-error>
        </div>

        <div class="form-actions">
          <button mat-button type="button" (click)="rangeForm.reset()">Clear</button>
          <button
            mat-raised-button
            color="warn"
            [disabled]="rangeForm.invalid"
            (click)="deleteByRange()"
          >
            <mat-icon>delete_sweep</mat-icon>
            Delete Tracks in Range
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-card class="info-card">
    <mat-card-content>
      <h3>How it works:</h3>
      <ul>
        <li>This tool removes tracks from artists based on how many songs you have from them</li>
        <li>
          For example, setting min=1 and max=1 removes all artists with only one track (singles)
        </li>
        <li>Setting min=20 removes all artists with 20 or more tracks</li>
        <li>All deleted tracks are automatically backed up to the database</li>
      </ul>
    </mat-card-content>
  </mat-card>
</div>
